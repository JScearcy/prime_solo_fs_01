$(document).ready(function(){function a(){return $.ajax({url:"/customers"}).done(function(a){e=a}).fail(function(){console.log("Fail")}).always(function(){})}function b(){return $.ajax({url:"/billing"}).done(function(a){f=a}).fail(function(){})}function c(a,b){return"true"==a.sepShip?$.ajax({url:"/shipping/"+a.id}).done(function(a){e[b].shipAdd=a.address1+" "+a.address2+" "+a.city+" "+a.state+" "+a.zip,d(e[b])}):d(e[b])}function d(a){console.log(a),$newCustDiv=$("<div>"),$newCustList=$("<ul>"),$newNameli=$("<li>"),$newAddli=$("<li>"),$newAddList=$("<ul>"),$shipAddli=$("<li>"),$billAddli=$("<li>"),a.shipAdd||(a.shipAdd=a.billAdd),$newNameli.text(a.firstName+" "+a.lastName),$billAddli.text("Billing address: "+a.billAdd),$shipAddli.text("Shipping address: "+a.shipAdd),$newAddList.append($billAddli).append($shipAddli),$newAddli.append($newAddList),$newCustList.attr({"class":"addList"}).append($newNameli).append($newAddli),$newCustDiv.append($newCustList),$customers.append($newCustDiv)}$customers=$(".customers");var e=[],f=[];$.when(a(),b()).done(function(){e.forEach(function(a,b){f.forEach(function(c,d){a.id==c.customerId&&(e[b].billAdd=c.address1+" "+c.city+" "+c.state+" "+c.zip,e[b].sepShip=c.shipAdd)})});for(var a=0,b=e.length;b>a;a++)c(e[a],a)})});